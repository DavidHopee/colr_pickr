/*!
 * Color picker
 * v1.0.0
 */
let colorPicker={boxStatus:!1,sliderStatus:!1,hue:0,saturation:100,lightness:50,buttonElem:null,contextMenuElem:null},LSCustomColors={0:[]},runColorPicker=function(t){const e=t.target,o=document.getElementById("color_picker");o.style.left=e.getBoundingClientRect().left+"px",o.style.top=e.getBoundingClientRect().top+e.offsetHeight+5+"px",o.style.display="block",o.buttonElem=e};!function(){for(y in console.log("dwqdqwd"),document.getElementsByClassName("color_picker")){if(!0===isNaN(y))continue;console.log(document.getElementsByClassName("color_picker")[y]),document.getElementsByClassName("color_picker")[y].onclick=runColorPicker;let t=document.getElementsByClassName("color_picker")[y].getAttribute("data-color");document.getElementsByClassName("color_picker")[y].style.background=t}const t=document.createElement("ASIDE");if(t.id="color_picker",t.innerHTML='\n\t\t<svg id="color_box" width="250" height="150">\n\t\t\t<defs>\n\t\t\t\t<linearGradient id="saturation" x1="0%" y1="0%" x2="100%" y2="0%">\n\t\t\t\t\t<stop offset="0%" stop-color="#fff"></stop>\n\t\t\t\t\t<stop offset="100%" stop-color="hsl(0,100%,50%)"></stop>\n\t\t\t\t</linearGradient>\n\t\t\t\t<linearGradient id="brightness" x1="0%" y1="0%" x2="0%" y2="100%">\n\t\t\t\t\t<stop offset="0%" stop-color="rgba(0,0,0,0)"></stop>\n\t\t\t\t\t<stop offset="100%" stop-color="#000"></stop>\n\t\t\t\t</linearGradient>\n\t\t\t\t<pattern id="pattern_config" width="100%" height="100%">\n\t\t\t\t\t<rect x="0" y="0" width="100%" height="100%" fill="url(#saturation)"></rect> }\n\t\t\t\t\t<rect x="0" y="0" width="100%" height="100%" fill="url(#brightness)"></rect>\n\t\t\t\t</pattern>\n\t\t\t</defs>\n\t\t\t<rect rx="5" ry="5" x="1" y="1" width="250" height="150" stroke="#fff" stroke-width="2" fill="url(#pattern_config)"></rect>\n\t\t\t<svg id="box_dragger" x="238" y="14" style="overflow: visible;">\n\t\t\t\t<circle r="9" fill="none" stroke="#000" stroke-width="2"></circle>\n\t\t\t\t<circle r="7" fill="none" stroke="#fff" stroke-width="2"></circle>\n\t\t\t</svg>\n\t\t</svg>\n\t\t<br>\n\t\t<svg id="color_picked_preview" width="30" height="30">\n\t\t\t<circle cx="15" cy="15" r="15" stroke="#a7a7a7" stroke-width="1"></circle>\n\t\t</svg>\n\t\t<svg id="color_slider" width="207" height="20">\n\t\t\t<defs>\n\t\t\t\t<linearGradient id="hue" x1="100%" y1="0%" x2="0%" y2="0%">\n\t\t\t\t\t<stop offset="0%" stop-color="#f00"></stop>\n\t\t\t\t\t<stop offset="16.666%" stop-color="#ff0"></stop>\n\t\t\t\t\t<stop offset="33.333%" stop-color="#0f0"></stop>\n\t\t\t\t\t<stop offset="50%" stop-color="#0ff"></stop>\n\t\t\t\t\t<stop offset="66.666%" stop-color="#00f"></stop>\n\t\t\t\t\t<stop offset="83.333%" stop-color="#f0f"></stop>\n\t\t\t\t\t<stop offset="100%" stop-color="#f00"></stop>\n\t\t\t\t</linearGradient>\n\t\t\t</defs>\n\t\t\t<rect rx="5" ry="5" x="1" y="1" width="201" height="20" stroke="#fff" stroke-width="2" fill="url(#hue)"></rect>\n\t\t\t<svg id="slider_dragger" x="11" y="11" style="overflow: visible;">\n\t\t\t\t<circle r="7" fill="none" stroke="#000" stroke-width="2"></circle>\n\t\t\t\t<circle r="5" fill="none" stroke="#fff" stroke-width="2"></circle>\n\t\t\t</svg>\n\t\t</svg>\n\t\t<div id="hex_box">\n\t\t\t<input id="hex_input" type="text" max="7" />\n\t\t\t<br>\n\t\t\t<label id="hex_text">HEX</label>\n\t\t</div>\n\t\t<div id="custom_colors">\n\t\t\t<h6 id="custom_colors_title">Custom Colors:</h6>\n\t\t\t<div id="custom_colors_box">\n\t\t\t\t<button id="custom_colors_add">+</button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div id="color_context_menu" class="color_ctx_menu">\n\t\t\t<button id="color_clear_single" class="color_ctx_menu">Remove Color</button>\n\t\t\t<button id="color_clear_all" class="color_ctx_menu">Remove All</button>\n\t\t</div>\n\t',document.getElementsByTagName("BODY")[0].appendChild(t),null===localStorage.getItem("custom_colors"))localStorage.setItem("custom_colors",'{"0": []}');else{LSCustomColors=JSON.parse(localStorage.getItem("custom_colors"));for(let t=LSCustomColors[0].length-1;t>=0;t--){let e=document.createElement("BUTTON");e.className="custom_colors_preview",e.style.background=LSCustomColors[0][t],e.setAttribute("data-color",LSCustomColors[0][t]),document.getElementById("custom_colors_box").insertBefore(e,document.getElementById("custom_colors_box").children[0])}}}(),document.addEventListener("mousedown",(function(){"color_context_menu"!=event.target.id&&(document.getElementById("color_context_menu").style.display="none"),console.log(event.target.offsetParent),event.target.offsetParent!=document.getElementById("color_picker")&&"svg"!=event.target.parentNode.tagName&&"color_ctx_menu"!=event.target.className&&"color_picker"!=event.target.className&&(document.getElementById("color_picker").style.display="none")}));let hslToHex=function(t,e,o){let n,l,r,s,c,i;return isFinite(t)||(t=0),isFinite(e)||(e=0),isFinite(o)||(o=0),(t/=60)<0&&(t=6- -t%6),t%=6,e=Math.max(0,Math.min(1,e/100)),o=Math.max(0,Math.min(1,o/100)),c=(1-Math.abs(2*o-1))*e,i=c*(1-Math.abs(t%2-1)),t<1?(n=c,l=i,r=0):t<2?(n=i,l=c,r=0):t<3?(n=0,l=c,r=i):t<4?(n=0,l=i,r=c):t<5?(n=i,l=0,r=c):(n=c,l=0,r=i),s=o-c/2,n=Math.round(255*(n+s)),l=Math.round(255*(l+s)),r=Math.round(255*(r+s)),n=n.toString(16),n=1==n.length?"0"+n:n,l=l.toString(16),l=1==l.length?"0"+l:l,r=r.toString(16),r=1==r.length?"0"+r:r,"#"+n+l+r},hexToHsl=function(t,e){const o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);r=parseInt(o[1],16),g=parseInt(o[2],16),b=parseInt(o[3],16);let n=r/255,l=g/255,s=b/255,c=Math.max(n,l,s),i=Math.min(n,l,s),d=(c+i)/2,u=0,a=0;return c!=i&&(u=d<.5?(c-i)/(c+i):(c-i)/(2-c-i),a=n==c?(l-s)/(c-i):l==c?2+(s-n)/(c-i):4+(n-l)/(c-i)),d*=100,u*=100,a*=60,a<0&&(a+=360),1==e?{hue:a,saturation:u,lightness:d}:`hsl(${a}, ${u}%, ${d}%)`},colorBoxHandler=function(t,e){const o=document.getElementById("color_box"),n=document.getElementById("box_dragger");let l=t-o.getBoundingClientRect().left,r=e-o.getBoundingClientRect().top;l<14&&(l=14),l>238&&(l=238),r<14&&(r=14),r>138&&(r=138),n.attributes.y.nodeValue=r,n.attributes.x.nodeValue=l;const s=Math.round((l-15)/224*100),c=100-s/2,i=100-(r-15)/124*100,d=Math.round(i/100*c);colorPicker.saturation=s,colorPicker.lightness=d;const u=`hsl(${colorPicker.hue}, ${s}%, ${d}%)`;document.getElementsByClassName("color_picker")[0].innerHTML=u;let a=hslToHex(colorPicker.hue,s,d);document.getElementById("hex_input").value=a,document.getElementById("color_picked_preview").children[0].setAttribute("fill",u)};document.getElementById("color_box").addEventListener("mousedown",(function(t){colorPicker.boxStatus=!0,colorBoxHandler(t.pageX,t.pageY)})),document.addEventListener("mousemove",(function(t){!0===colorPicker.boxStatus&&colorBoxHandler(t.pageX,t.pageY)})),document.addEventListener("mouseup",(function(t){!0===colorPicker.boxStatus&&(colorPicker.boxStatus=!1)}));let colorSliderHandler=function(t){const e=document.getElementById("color_slider"),o=document.getElementById("slider_dragger");let n=t-e.getBoundingClientRect().left;n<11&&(n=11),n>192&&(n=192),o.attributes.x.nodeValue=n;const l=(n-11)/181*100,r=Math.round(359-3.59*l);colorPicker.hue=r;const s=`hsl(${r}, ${colorPicker.saturation}%, ${colorPicker.lightness}%)`;let c=hslToHex(r,colorPicker.saturation,colorPicker.lightness);document.getElementById("hex_input").value=c,document.getElementById("color_picked_preview").children[0].setAttribute("fill",s),document.getElementById("saturation").children[1].attributes[1].nodeValue=`hsl(${r}, 100%, 50%)`};document.getElementById("color_slider").addEventListener("mousedown",(function(t){colorPicker.sliderStatus=!0,colorSliderHandler(t.pageX)})),document.addEventListener("mousemove",(function(t){!0===colorPicker.sliderStatus&&colorSliderHandler(t.pageX)})),document.addEventListener("mouseup",(function(){!0===colorPicker.sliderStatus&&(colorPicker.sliderStatus=!1)}));let updateColorDisplays=function(t){t=hexToHsl(t,!0),console.log(t);document.getElementById("color_box");const e=document.getElementById("box_dragger");document.getElementById("color_slider"),document.getElementById("slider_dragger");let o,n;o=2.24*t.saturation+14,n=100-100*t.lightness/t.saturation*2,console.log(n),e.attributes.x.nodeValue=o,e.attributes.y.nodeValue=n};document.getElementById("hex_input").addEventListener("blur",(function(){console.log("leave")}));let addCustomColor=function(){const t=`hsl(${colorPicker.hue}, ${colorPicker.saturation}%, ${colorPicker.lightness}%)`;let e=document.createElement("BUTTON");e.className="custom_colors_preview",e.style.background=t,e.setAttribute("data-color",t),document.getElementById("custom_colors_box").insertBefore(e,document.getElementById("custom_colors_box").children[0]),LSCustomColors[0].unshift(t),localStorage.setItem("custom_colors",JSON.stringify(LSCustomColors))};document.getElementById("custom_colors_add").addEventListener("click",(function(){addCustomColor()})),document.getElementById("custom_colors_box").addEventListener("contextmenu",(function(t){if("custom_colors_preview"==t.target.className){t.preventDefault();const e=document.getElementById("color_context_menu");e.style.display="block",e.style.top=t.target.getBoundingClientRect().top+25+"px",e.style.left=t.target.getBoundingClientRect().left+"px",colorPicker.contextMenuElem=t.target}}));let clearSingleCustomColor=function(){for(x in console.log("wef"),document.getElementById("custom_colors_box").removeChild(colorPicker.contextMenuElem),LSCustomColors={0:[]},document.getElementsByClassName("custom_colors_preview"))!0!==isNaN(x)&&LSCustomColors[0].push(document.getElementsByClassName("custom_colors_preview")[x].getAttribute("data-color"));localStorage.setItem("custom_colors",JSON.stringify(LSCustomColors))};document.getElementById("color_clear_single").addEventListener("mousedown",(function(){clearSingleCustomColor()}));let clearAllCustomColors=function(){for(LSCustomColors={0:[]};document.getElementsByClassName("custom_colors_preview").length>0;)document.getElementById("custom_colors_box").removeChild(document.getElementsByClassName("custom_colors_preview")[0]);localStorage.setItem("custom_colors",JSON.stringify(LSCustomColors))};document.getElementById("color_clear_all").addEventListener("mousedown",(function(){clearAllCustomColors()}));